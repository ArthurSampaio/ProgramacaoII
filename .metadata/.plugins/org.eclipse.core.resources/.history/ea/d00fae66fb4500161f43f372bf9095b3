package lab03.economizap2.estoque;
import lab03.economizap2.produto.Produto;

/**
 * Classe Estoque
 * 		Controla o estoque de um supermercado que utiliza Produtos 
 * @author Arthur Sampaio
 * 
 * @version 1.0
 * 
 * <br>
 */


public class Estoque {
	
	private int indice = 0;
	private int tamanho = 5;
	private Produto[] estoque = new Produto[tamanho];
	public String quebraLinha = System.getProperty("line.separator");
	
	//O numero mágico "FALSE" serve para retornar -1 quando a busca por um elemento no 
	//Array estoque for mal-sucedida;
	public static final int FALSE = -1; 

	

/**
 * Verifica a Quantidade de produtos, se estiver perto de preencher o array ele chama o método aumentaQuantidadeProdutos
 * 	
 */
	
	public void verificaQuantidadeProdutos(){
		if (estoque.length ==  tamanho-1){
			aumentaQuantidadeProdutos();
		}
	}
	
	/**
	 * Aumenta o tamanho do array estoque caso esteja perto de preencher
	 */
	
	public void aumentaQuantidadeProdutos(){
		Produto[] novoEstoque = new Produto[tamanho * 2];
		for(int i = 0; i < tamanho-1; i++){
			novoEstoque[i] = estoque[i];
		}
		setTamanho(tamanho * 2);
		estoque = novoEstoque;
	}

	/**
	 * Insere um produto no estoque
	 */
	
	public boolean insereProduto(Produto novoProduto){
		verificaQuantidadeProdutos();
		estoque[indice] = novoProduto;
		setIndice(indice + 1);
		return true;
	}
	
	/**
	 * verifica se o nome do produto passado por parâmetro está no array estoque
	 */
	
	public boolean verificaEstoque (String nomeProduto){
		for (int i = 0; i < tamanho-1; i++){
			if (estoque[i].getNome().equals(nomeProduto)){
				return true;
			}
		}
		return false;
	}
	
	/**
	 * Retira uma quantidade (qtd) de um produto do array estoque
	 * Retorna true se a operação for concluida, c.c. retorna false
	 * 
	 * @return boolean
	 *  
	 */
	
	public boolean retiraProduto (String nomeProduto, int qtd){
		for (int i = 0; i < tamanho; i++){
			if (estoque[i].getNome() == nomeProduto){
				return estoque[i].retiraQuantidadeProduto(qtd);
			}
		}
		return false;
	}
	
	public int pesquisaPorNome(String nomeProduto){
		for (int i = 0; i < tamanho; i++){
			if (estoque[i].getNome() == nomeProduto){
				return i;
			}
		}		
		return FALSE;  //Isso ainda é uma gambiarra 
	} 
	
	public int getIndice() {
		return indice;
	}

	public void setIndice(int indice) {
		this.indice = indice;
	}

	public int getTamanho() {
		return tamanho;
	}

	public void setTamanho(int tamanho) {
		this.tamanho = tamanho;
	}
	
	public String toString (){
		return "O estoque tem " + estoque.length + "produtos. ";
	}


	

}
